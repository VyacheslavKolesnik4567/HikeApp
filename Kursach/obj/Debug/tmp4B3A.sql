CREATE TABLE [dbo].[Head] (
    [HeadId] [int] NOT NULL IDENTITY,
    [HeadFirstName] [nvarchar](25) NOT NULL,
    [HeadLastName] [nvarchar](25) NOT NULL,
    [Birthday] [datetime] NOT NULL,
    CONSTRAINT [PK_dbo.Head] PRIMARY KEY ([HeadId])
)
CREATE TABLE [dbo].[Kayak] (
    [KayakId] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](40) NOT NULL,
    [CountPlaces] [int] NOT NULL,
    [Capacity] [int] NOT NULL,
    [Price] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Kayak] PRIMARY KEY ([KayakId])
)
CREATE TABLE [dbo].[Description] (
    [HikeId] [int] NOT NULL IDENTITY,
    [Path] [nvarchar](200) NOT NULL,
    [Price] [int] NOT NULL,
    [HikeDescription] [nvarchar](max),
    [Hike_HikeId] [int],
    CONSTRAINT [PK_dbo.Description] PRIMARY KEY ([HikeId])
)
CREATE TABLE [dbo].[Hike] (
    [HikeId] [int] NOT NULL IDENTITY,
    [DateBegin] [datetime] NOT NULL,
    [DateEnd] [datetime] NOT NULL,
    [CountKayak] [int] NOT NULL,
    [Difficulty] [int] NOT NULL,
    [HeadId] [int] NOT NULL,
    [KayakId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Hike] PRIMARY KEY ([HikeId])
)
CREATE TABLE [dbo].[HikeTurist] (
    [HikeTuristId] [int] NOT NULL IDENTITY,
    [HikeId] [int] NOT NULL,
    [TuristId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.HikeTurist] PRIMARY KEY ([HikeTuristId])
)
CREATE TABLE [dbo].[Turist] (
    [TuristId] [int] NOT NULL IDENTITY,
    [TuristFirstName] [nvarchar](25) NOT NULL,
    [TuristLastName] [nvarchar](25) NOT NULL,
    [Birthday] [datetime] NOT NULL,
    CONSTRAINT [PK_dbo.Turist] PRIMARY KEY ([TuristId])
)
CREATE INDEX [IX_Hike_HikeId] ON [dbo].[Description]([Hike_HikeId])
CREATE INDEX [IX_HeadId] ON [dbo].[Hike]([HeadId])
CREATE INDEX [IX_KayakId] ON [dbo].[Hike]([KayakId])
CREATE INDEX [IX_TuristId] ON [dbo].[HikeTurist]([TuristId])
CREATE INDEX [IX_HikeId] ON [dbo].[HikeTurist]([HikeId])
ALTER TABLE [dbo].[Description] ADD CONSTRAINT [FK_dbo.Description_dbo.Hike_Hike_HikeId] FOREIGN KEY ([Hike_HikeId]) REFERENCES [dbo].[Hike] ([HikeId])
ALTER TABLE [dbo].[Hike] ADD CONSTRAINT [FK_dbo.Hike_dbo.Head_HeadId] FOREIGN KEY ([HeadId]) REFERENCES [dbo].[Head] ([HeadId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Hike] ADD CONSTRAINT [FK_dbo.Hike_dbo.Kayak_KayakId] FOREIGN KEY ([KayakId]) REFERENCES [dbo].[Kayak] ([KayakId]) ON DELETE CASCADE
ALTER TABLE [dbo].[HikeTurist] ADD CONSTRAINT [FK_dbo.HikeTurist_dbo.Turist_TuristId] FOREIGN KEY ([TuristId]) REFERENCES [dbo].[Turist] ([TuristId]) ON DELETE CASCADE
ALTER TABLE [dbo].[HikeTurist] ADD CONSTRAINT [FK_dbo.HikeTurist_dbo.Hike_HikeId] FOREIGN KEY ([HikeId]) REFERENCES [dbo].[Hike] ([HikeId]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](255) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId])
)
BEGIN TRY
    EXEC sp_MS_marksystemobject 'dbo.__MigrationHistory'
END TRY
BEGIN CATCH
END CATCH
INSERT INTO [__MigrationHistory] ([MigrationId], [Model], [ProductVersion]) VALUES ('201604091134251_start', 0x1F8B0800000000000400D556CD72D33C14DD33C33B78B48205515B5840C7812969FB9181B40C2EEC6FECEB44837EFC4972277936163C12AFC055FC13C76E9AC274C3CE96EECFB947E75EE9D78F9FF1BB9592D12D5A278C1EB3E3D1118B50A726137A3166A5CF5FBC66EFDE3E7D125F646A157D6BEC5E063BF2D46ECC96DE17A79CBB74890ADC4889D41A67723F4A8DE290197E7274F4861F1F73A4108C624551FCA5D45E28DCFCD0EFC4E8140B5F829C990CA5ABD76927D9448DAE40A12B20C531FB585A07E9725459B2E84C0A201409CA9C45C5ABD3AF0E136F8D5E24057801F2665D20EDE7201DD6984F8B570F857D74126073D0DA780A67F45F95CDDA82A8A40B2ADDAF03AC4D59634688ED676B7221B16B48A61F71BDB3404B6458A0F5EB2F9877DCA7198BF8AE2FEF3BB7AE3DBF8064CCA6DABF3C61D1552925CC25B68411A3893716FF438D163C669FC17BB4A48169869B4A0699EFC813BE9A4C743A242E165D8A15669F502FFCB2CD368355B3429F2CFAAA0569919CBC2DB18BAEFAEF268EF996D821DDA4300F824AA8417D10DF31ACE1CAF738AFEC13F4C3D321B56D7354921B750FEF4E3C6DE6ADA879A5EA46FD7C8FFCE319140551D569877A254AAA5E98BC48FE5C8FAA8AC15377872C5BB46D263A7C58606F975213D24B619D3F070F73088737C9D4C0EC013C3799EEA0BB2FFE2DFB8D53F8AE1C77E7C2686F537579BCA4D214A9785325B688EE69C9DA3F494182DDD35013234BA5EF6BCE4351AA76E9C7A956879162DE2BA74F1B1FF0D61B15FDB3B84FC67D93367B2BE79E6CE35A428747FB405395098B88A25B91053D256BE7518D82C128F95F4EA4A07AB70633D02247E76FCC77A41145927FDDBB21FE627A73E732F90F8C7011983838AC0713FECFA6B7BE059B2EC13E53B07AFE98137938501E3C970F8DE54A466396CD0D9551C17D8CB93D1476CCBB2F9BF81C9D586C4384778EC6343C23B6411B9BA9CE4DC33D55D945D498F48E66861E3222EBCC7A9143EA693B45E73697EB379025995CA83966537D5DFAA2F467CEA19ACB9D0B3BE6F7E7DF5C4EBB98E3EB22FCB9C72881600A2A01AFF5FB52C8ACC57D3994E6BE104137B5DE09153D2E28DC62DD46BA32FA81816AFACEB1401DBAE50655212998BBD609DCE27E6C8739DC652C3E17B0B0A05C1D63EB1F1EDA3CBCB4DFFE06831A32599B0B0000, '5.0.0.net45')
CREATE TABLE [dbo].[Turist] (
    [TuristId] [int] NOT NULL IDENTITY,
    [TuristFirstName] [nvarchar](25) NOT NULL,
    [TuristLastName] [nvarchar](25) NOT NULL,
    [Birthday] [datetime] NOT NULL,
    CONSTRAINT [PK_dbo.Turist] PRIMARY KEY ([TuristId])
)
CREATE TABLE [dbo].[HikeTurist] (
    [HikeTuristId] [int] NOT NULL IDENTITY,
    [HikeId] [int] NOT NULL,
    [TuristId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.HikeTurist] PRIMARY KEY ([HikeTuristId])
)
CREATE INDEX [IX_HikeId] ON [dbo].[HikeTurist]([HikeId])
CREATE INDEX [IX_TuristId] ON [dbo].[HikeTurist]([TuristId])
CREATE TABLE [dbo].[Hike] (
    [HikeId] [int] NOT NULL IDENTITY,
    [DateBegin] [datetime] NOT NULL,
    [DateEnd] [datetime] NOT NULL,
    [CountKayak] [int] NOT NULL,
    [Difficulty] [int] NOT NULL,
    [HeadId] [int] NOT NULL,
    [KayakId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Hike] PRIMARY KEY ([HikeId])
)
CREATE INDEX [IX_KayakId] ON [dbo].[Hike]([KayakId])
CREATE INDEX [IX_HeadId] ON [dbo].[Hike]([HeadId])
CREATE TABLE [dbo].[Description] (
    [HikeId] [int] NOT NULL IDENTITY,
    [Path] [nvarchar](200) NOT NULL,
    [Price] [int] NOT NULL,
    [HikeDescription] [nvarchar](max),
    [Hike_HikeId] [int],
    CONSTRAINT [PK_dbo.Description] PRIMARY KEY ([HikeId])
)
CREATE INDEX [IX_Hike_HikeId] ON [dbo].[Description]([Hike_HikeId])
CREATE TABLE [dbo].[Kayak] (
    [KayakId] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](40) NOT NULL,
    [CountPlaces] [int] NOT NULL,
    [Capacity] [int] NOT NULL,
    [Price] [int] NOT NULL,
    CONSTRAINT [PK_dbo.Kayak] PRIMARY KEY ([KayakId])
)
CREATE TABLE [dbo].[Head] (
    [HeadId] [int] NOT NULL IDENTITY,
    [HeadFirstName] [nvarchar](25) NOT NULL,
    [HeadLastName] [nvarchar](25) NOT NULL,
    [Birthday] [datetime] NOT NULL,
    CONSTRAINT [PK_dbo.Head] PRIMARY KEY ([HeadId])
)
CREATE TABLE [dbo].[HikePhoto] (
    [PhotoId] [int] NOT NULL IDENTITY,
    [HikeId] [int] NOT NULL,
    [Location] [nvarchar](max) NOT NULL,
    CONSTRAINT [PK_dbo.HikePhoto] PRIMARY KEY ([PhotoId])
)
CREATE INDEX [IX_HikeId] ON [dbo].[HikePhoto]([HikeId])
ALTER TABLE [dbo].[HikeTurist] ADD CONSTRAINT [FK_dbo.HikeTurist_dbo.Hike_HikeId] FOREIGN KEY ([HikeId]) REFERENCES [dbo].[Hike] ([HikeId]) ON DELETE CASCADE
ALTER TABLE [dbo].[HikeTurist] ADD CONSTRAINT [FK_dbo.HikeTurist_dbo.Turist_TuristId] FOREIGN KEY ([TuristId]) REFERENCES [dbo].[Turist] ([TuristId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Hike] ADD CONSTRAINT [FK_dbo.Hike_dbo.Kayak_KayakId] FOREIGN KEY ([KayakId]) REFERENCES [dbo].[Kayak] ([KayakId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Hike] ADD CONSTRAINT [FK_dbo.Hike_dbo.Head_HeadId] FOREIGN KEY ([HeadId]) REFERENCES [dbo].[Head] ([HeadId]) ON DELETE CASCADE
ALTER TABLE [dbo].[Description] ADD CONSTRAINT [FK_dbo.Description_dbo.Hike_Hike_HikeId] FOREIGN KEY ([Hike_HikeId]) REFERENCES [dbo].[Hike] ([HikeId])
ALTER TABLE [dbo].[HikePhoto] ADD CONSTRAINT [FK_dbo.HikePhoto_dbo.Hike_HikeId] FOREIGN KEY ([HikeId]) REFERENCES [dbo].[Hike] ([HikeId]) ON DELETE CASCADE
INSERT INTO [__MigrationHistory] ([MigrationId], [Model], [ProductVersion]) VALUES ('201604091138348_tablePhoto', 0x1F8B0800000000000400DD5DDB6E1B39127D5F60FEA1D14F3B0B8C646732C06C20CF2091E31D23716C449E7935E86E4A22D2B7EDA60CEBDBF6613F697F61C9BEF2DA4DF645973CC56A92C562D521592C5631FFFBCF7F17BFBF8681F302D30CC5D1957B39BB701D1879B18FA2CD95BBC3EB9F7E757FFFED87BF2D3EFAE1ABF35755EF675A8FB48CB22B778B71F26E3ECFBC2D0C41360B9197C659BCC6332F0EE7C08FE76F2E2EFE39BFBC9C4342C225B41C67F175176114C2FC07F9B98C230F26780782BBD88741567E2725AB9CAAF30584304B8007AFDC4FBB3403DE7656D4749DF70102848B150CD6AE93BC7DF7670657388DA3CD2A011881E0719F4052BE0641064B9EDF256F4DD9BE7843D99E83288A31211747BD86EDD6032243FA48868EF794AD7C58572EE1387D48E3350A205B9154FD04F7DC07F289544C608AF75FE19A697EEBBBCE9C6F3B171BD74D857694932BF736C23FBF719D2FBB2000CF01AC054624BAC2710AFF052398020CFD0780314C09066E7D988F44EA59D10FFDABEA89688780CB756ED02BF43FC36883B7756F77E0B5FA42FE749D3F2344B0481AE1740759EE8ADF6CC78B7923D856713FEE5294E13E922E5AF69175D3726A69173DDDA034C33D84FEE697169997D54DFAFF0C8ED4FD0794E2AD0FF655C7D744888F283420F405BCA04D3EC505927FA06FB01815596DBEC220AF936D51522C3AB3A6FCA984967393C6E1D738E01A3F55FF807403499DC758576315EF52AF2FBA1B727D10DEB4EE8372BEF5D448A7BD75F76382566B2AAD58D182E489D18D00912716050A80B0E52A78B4F154F5381CBA55CF7AE856BCF7866E5FD0F685EB21804AD7A00F708322FB454941E963E40FA6B38C89FDF509ECC1B761D3E71AADD7C8DB05783F8CCE1F10F843A7723E9CF166F235CCBC1425F98451CE1DA6C25331ED9BA9239649735AAA603BA94BE529F8CA4B72A219CB12F359E2862DB36584AA4EBDB69002998DE6ABBCCE3545D64C300BEBB0C557B5C4A916671BCE1EB6318EF5B6435E2C41882F516E0A4CF120938101E3F7B8FC92065B5B3BF4E262A821FA90220F0E5C15898058DD4C7B7EEA65D6582D82E2DCD2AE92BD505CAC883DF05B6F1CB60036DC718623B8C749EAED6000E736C243003CBA800F81F11224C043434D843EF3A915CFEA05D960F71461ACDA59FBD9BF742BEDB30097D693F5026C64758D705023FD1CCF21417BFFDEDC111A63A2CBE2928C1BD918EB7D70CB8D913EE8CD1BF6816FDDF01C1C0D9F630F8CBE898FE99C30B24255D6B1C2483501D1FB2C8B3D9473229BA14F0A570039F73A5D8645215AC1302102252754940488EE4257EE3F2489B590AEEDEE867421239EE6C56C76298E9B1961FBC0D93D47C79872036A782A8F833C5397AE38FBEEA36B18400C9DF71ECEEF719620F3802F638828CD3761C5503CB2C8C9FC87299D7E2058122CE214A008CB8B058A3C9480402F04A1898D81478759F720965CC30446747DD00F7A60D7750F82E4BB2463012C6643D02953B53B30BACC0FF7074195CA31701050C9123051ACDAE6B282943CE2611D1F0250822345AB4C9D57A55DA353414BE760E7B9A99C43D3A04C2D11238D2BFD2B7650534B6058EF07C21B6398B4295865A5F0FA2D2C540B6340E7823B20887B634DE6FB80509375711648E36FC2DA50A1B916EBB79EB49156604E4DF63450A764DE44F7BA3B676BE82935339483D1F1571C89481B4C5AC094C120FD065F65F4D1FA2B88E5882172D66F0E582544D88022196D3CA93AB241A25201AD8300171E211161278201211D89CEC6FC759D44833B0E7690CA6D761591F290D5350C62A0298791DBD20632A8AE8B9482283731810C0333A548CA733D534DE7BF17B16F70EAAEC7206A419A4806E76C8658890771B5E2C76A2007CEA52B8B407BFAEE3C7F33BC56986919B2EAD83CC1685927A03C58DD89B0EB4CC8325AE0BB65A48AA3DC1403152F7515A36D3BAE181D58BAF8363A670844EAC5721411B07E3BB5047406B489092DB05E2D4D1D425018CD130140085E520BA0C5AE33B4ECCC346868CB31C4ECA150B9536BDBA12E5BCC8B58E9F2C362AE09AA5EDC812441D18609B22EBF38AB22C27AF9D3CA3ECA392C68CC3D6E65112D9DBA271CA7600385527AE9E8C3FCAAE81A60F00CA8777BE9875235034BA9EA496130C94AAB36DAAA11FDBBDC3CB868F39936549B95E30D195A48CDD2FCDE8151776B6B8706BB8300A49A30ED651CECC2A82DE4BB8B4A710326D229BECA941673613892592CC94D3A57F0BA30D25435250628493DD10DF4A36BA8136A73666085AA3F497451622E4965824CA12DDDE6FA5326DB9499536D6E35597ACDD7930113BB580F0094DE843000555B639D809B3622B8F812739555CE1591561F98DA00FE888A1FACF29ECAB653F370A530E1C52C21E6B31DAD3CC058A4947F34A7C30618B3A4D8EF165C3161C61C63CC778BA950DEA07052D7DCAAE8A9D4377B2C19ED75DFD1260277221F301FB431A239A1AE69D1DA7ADAD951447FB2348A2F16148AC8338E44F1C96EF9E57C50E2A05A1C5447444FE9D618801B4554A6116234EDC69A8D3A3AB295646B1B716193D2D2571558D0ABA3273962F5D769707CAC6D3BF72D0DD9B6A510CA9C42E7B6AD6C36ED062244458AC47A99FB7CACA348F2BB37F54BF7D440B34F11C96806227D5BED94AC4218B949A90E886CD5FB285B6513A3C8D269BE1E5ED7BC1B4C6BD994EE4F13E3A5AC6A61A0509F9E3E37ACE38ADD4A5B4FFA1B7086871EEC69AF410783A995B3651CF928BF63BFCD68D06A1DB06A3870D10D2A4344F2868A556A80D65E51C1FBB9283D91DDEF4E48AEC9A28AEB90E1BF209FBA2557FB0CC370462BCC56FF0E96012253A2A9700722B486197E8CBFC1284F32FA5578BEA2C7D312F32CF38333785F0251497406625B46558B4F4B442F20F5B620FD7B085E7FFC8E9E8B9844789A97222A194A9910A33C0431167531B1C22732C1DD891567FB8CC22408A8965DA68B81EF2774D33893D7002691B7F41080216AD5949887007AD3911F02E88302F919803E54F874B43E148484CC11C1781229D2936092CD8E562FCE34177A48B2662F2C882E31EBFD5D4DF3A975C91B60251C3DFB78127074EEDC6FEDB1A1C82BEE831031ABB80F0D4B989E4922EF34A6822A87772C634E95A27B4E86E2D1735F4FD43A14935EB5CBB785028625251D3305A90A523B74DAD121333FB45112679BEEA1D0DA0132308E8F1C0B4D8E9CBC717AE91A0352B68F96A56DB4DA8D99977DB0546CE335ED2C92AF8F966F7D407C686E65A7C9AA36DEF18E99486DFCD685919AE4D727381AAA37C4ACDFC83879F3A33D4249DD65CB8DDB6965371FD36E2D53CEFA65539F3C6CDA6EFC8F6AB40A379BB5F7444C901055A7CD14ED4A142DEE33C909F9996ABB3898D96792B62492AA3AB04E32EDC83155F5C1961BF4A34D41D5D1B6494EEDCA4D55F5619DBCAACF5D5591374F6BD566B52A256395EFDA9EEEAA93BC4536ECE8E982525698613A98269BEC1413E2140CAB993DF850C7CBE995D3783B07D7A9F9E3A5ED4A99BA4719CCC899E7F6B34DB1E04A615E27977E6BBFA0702BA7108338494AA91C2C450C1CE6BFF221D65586360D091A0216418F336DEA3AB7D13AAE2C2C81A3AA8AE04FBE8318F8C4EE799F62B4061E26C51ECCB2FC21C5BF40B023553E86CFD0BF8DEE7738D9613264183E075C982AB5D4DAFACFF366799E17F745FEC41843206C227A05711F7DD8A1C0AFF9BE5178C03524A80958BAF9A92E3175F76FF635A52F716448A8145F6DB93EC2300908B1EC3E5A8117A8E7AD5B86BCC416D7086C521066258DA63DF949E0E787AFBFFD1F27E517A08C6A0000, '5.0.0.net45')
